<!-- ABF Fine-mapping -->
<div class="tab-pane fade" id="abf_finemapping">
  <h5><i class="fas fa-search-location me-2"></i>ABF Fine-mapping</h5>
  <p class="text-muted">
    Calculate Approximate Bayes Factors (ABF) for statistical fine-mapping using GWASLab's built-in method.<br>
    Identify causal variants within GWAS loci and create credible sets.
  </p>

  <form method="post" enctype="multipart/form-data" action="run_gwaslab.php" data-task="abf_finemapping">
    <input type="hidden" name="task" value="abf_finemapping">

    <div class="card mb-3">
      <div class="card-header"><strong>ABF Fine-mapping Options</strong></div>
      <div class="card-body">

        <div class="mb-3">
          <label for="locus_chr" class="form-label"><strong>Chromosome (optional)</strong></label>
          <input type="number" class="form-control" id="locus_chr" name="locus_chr" min="1" max="23" placeholder="e.g. 6">
          <small class="text-muted">Filter to specific chromosome for fine-mapping (leave empty for genome-wide).</small>
        </div>

        <div class="mb-3">
          <label for="locus_start" class="form-label"><strong>Region Start (bp, optional)</strong></label>
          <input type="number" class="form-control" id="locus_start" name="locus_start" min="1" placeholder="e.g. 17068326">
          <small class="text-muted">Start position for fine-mapping region (requires chromosome).</small>
        </div>

        <div class="mb-3">
          <label for="locus_end" class="form-label"><strong>Region End (bp, optional)</strong></label>
          <input type="number" class="form-control" id="locus_end" name="locus_end" min="1" placeholder="e.g. 27068326">
          <small class="text-muted">End position for fine-mapping region (requires chromosome).</small>
        </div>

        <div class="mb-3">
          <label for="prior_var" class="form-label"><strong>Prior Variance (W)</strong></label>
          <input type="number" step="any" class="form-control" id="prior_var" name="prior_var" value="0.04" min="0.001" max="1">
          <small class="text-muted">Variance of the normal prior for effect sizes. Default: 0.04.</small>
        </div>

      </div>
    </div>

    <button type="submit" class="btn btn-primary" style="background:#B99C6B;border:none;">
      <i class="fas fa-calculator me-2"></i>Run ABF Fine-mapping
    </button>
  </form>

  <!-- Processing Status for this tab -->
  <div id="processing-status-abf_finemapping" class="mt-3" style="display:none;"></div>
  <!-- Results for this tab -->
  <div id="result-info-abf_finemapping" class="mt-3" style="display:none;"></div>
  <!-- Download section for this tab -->
  <div id="download-section-abf_finemapping" style="display:none;">
    <div class="card mt-3">
      <div class="card-body">
        <div class="download-ready alert alert-info mb-3" style="display:none;"></div>
        <button id="download-zip-abf_finemapping"
                class="btn btn-outline-primary"
                type="button"
                disabled
                onclick="downloadZip(this)"
                data-zip="">
          <i class="fas fa-file-archive me-2"></i>Download All (ZIP)
        </button>
        <small id="zip-size-abf_finemapping" class="text-muted d-block mt-2"></small>
      </div>
    </div>
  </div>
</div>
