<!-- Extract Lead Variants -->
<div class="tab-pane fade show active" id="extract_lead">
  <h5><i class="fas fa-vial me-2"></i>Extract Lead Variants</h5>
  <p class="text-muted">
    Identify lead variants for genome-wide significant loci using a sliding window approach.<br>
    Specify detection method, window size, and threshold.
  </p>
  <form method="post" enctype="multipart/form-data" action="run_gwaslab.php" data-task="extract_lead">
    <input type="hidden" name="task" value="extract_lead">
    <div class="card mb-3">
      <div class="card-header"><strong>Lead Variant Extraction Options</strong></div>
      <div class="card-body">
        <div class="mb-3">
          <label for="lead_method" class="form-label"><strong>Detection Method</strong></label>
          <select class="form-select" id="lead_method" name="lead_method">
            <option value="mlog10p">MLOG10P (default)</option>
            <option value="pvalue">P-value</option>
          </select>
          <small class="text-muted">Choose whether to detect using negative log10 P or raw P-value.</small>
        </div>
        <div class="mb-3">
          <label for="window_size" class="form-label"><strong>Sliding Window Size (kb)</strong></label>
          <input type="number" class="form-control" id="window_size" name="window_size" value="500" min="50" max="5000" step="50">
          <small class="text-muted">Set the window size (in kilobases) for grouping variants (default: 500 kb).</small>
        </div>
        <div class="mb-3">
          <label for="sig_level" class="form-label"><strong>Significance Threshold (P-value)</strong></label>
          <input type="number" class="form-control" id="sig_level" name="sig_level" value="5e-8" step="1e-8" min="1e-12" max="1e-2">
          <small class="text-muted">Variants below this P-value will be considered significant (default: (5e-8)).</small>
        </div>
        <div class="mb-3">
          <label for="build" class="form-label"><strong>Genome Build</strong></label>
          <select class="form-select" id="build" name="build">
            <option value="19">GRCh37 (19)</option>
            <option value="38">GRCh38 (38)</option>
          </select>
          <small class="text-muted">Select the reference genome build for coordinate annotation.</small>
        </div>
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" name="annotate_lead" id="annotate_lead">
          <label class="form-check-label" for="annotate_lead">
            <strong>Annotate with Nearest Gene</strong><br>
            <small class="text-muted">Add gene annotation to output using Ensembl or RefSeq.</small>
          </label>
        </div>
<!-- 
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" name="verbose_logs" id="verbose_logs" checked>
          <label class="form-check-label" for="verbose_logs">
            <strong>Show verbose output/logs</strong>
          </label>
        </div> -->
      </div>
    </div>
    <button type="submit" class="btn btn-primary" style="background:#B99C6B;border:none;">
      <i class="fas fa-play me-2"></i>Extract Lead Variants
    </button>
  </form>
  <!-- Processing Status for this tab -->
  <div id="processing-status-extract_lead" class="mt-3" style="display:none;"></div>
  <!-- Results for this tab -->
  <div id="result-info-extract_lead" class="mt-3" style="display:none;"></div>
  <!-- Logs -->
  <div id="log-section-extract_lead" class="mt-3" style="display:none;">
    <button class="btn btn-sm btn-outline-secondary mb-2" type="button"
            onclick="toggleLogs('extract_lead')">
      <i class="fas fa-terminal me-2"></i>View Logs
    </button>
    <pre id="log-content-extract_lead" class="bg-dark text-light p-3 rounded"
        style="max-height:300px; overflow-y:auto; font-size:0.9em; display:none;"></pre>
  </div>
  <!-- Download section for this tab -->
  <div id="download-section-extract_lead" style="display:none;">
    <div class="card mt-3">
      <div class="card-body">
        <div class="download-ready alert alert-info mb-3" style="display:none;"></div>
        <button id="download-zip-extract_lead"
                class="btn btn-outline-primary"
                type="button"
                disabled
                onclick="downloadZip(this)"
                data-zip="">
          <i class="fas fa-file-archive me-2"></i>Download All (ZIP)
        </button>
        <small id="zip-size-extract_lead" class="text-muted d-block mt-2"></small>
      </div>
    </div>
  </div>
</div>

