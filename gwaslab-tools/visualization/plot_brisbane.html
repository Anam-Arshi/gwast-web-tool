<!-- plot_brisbane.html -->
<div class="tab-pane fade" id="brisbane">
  <h5><i class="fas fa-chart-area me-2"></i>Brisbane Plot</h5>
  <p class="text-muted mb-3">
    Create a <strong>GWAS signal density plot</strong> showing variant density around each reference variant within a flanking window.
  </p>
  <div class="alert alert-info">
    <strong>Note:</strong> Load summary stats of independent signals (e.g. from conditional analysis) for meaningful results. The window size sets the flanking region length.
  </div>

  <form method="post" action="run_gwaslab_plots.php" class="viz-form" data-task="brisbane">
    <input type="hidden" name="task" value="brisbane">

    <div class="card mb-3">
      <div class="card-header"><strong>Plot Options</strong></div>
      <div class="card-body">
        <div class="mb-3">
          <label for="bwindowsizekb" class="form-label"><strong>Window Size (kb)</strong><span class="text-danger">*</span></label>
          <input type="number" class="form-control" id="bwindowsizekb" name="bwindowsizekb" value="100" min="10" max="1000" step="10" required>
          <small class="text-muted">Length of flanking region to calculate signal density (default 100 kb).</small>
        </div>
      </div>
    </div>

<!-- Annotation -->
<div class="card mb-3">
  <div class="card-header"><strong>Annotation & Highlighting</strong></div>
  <div class="card-body">
    <div class="row g-3">
      <div class="col-md-6">
        <label for="anno" class="form-label"><strong>Annotation Mode</strong></label>
        <select class="form-select" name="anno" id="anno">
          <option value="None" selected>None</option>
          <option value="True">Chromosome & Position</option>
          <option value="GENENAME">Nearest gene name</option>
          <option value="SNPID">SNPID</option>
        </select>
        <small class="text-muted">Mode to annotate genome-wide or selected loci.</small>
      </div>
      <div class="col-md-6">
        <label for="build" class="form-label"><strong>Build</strong></label>
        <select class="form-select" id="build" name="build">
          <option value="19" selected>GRCh37/hg19</option>
          <option value="38">GRCh38/hg38</option>
        </select>
        <small class="text-muted">Reference build for coordinates/annotation.</small>
      </div>
    </div>
  </div>
</div>

    <div class="card mb-3">
      <div class="card-header"><strong>Figure Settings</strong></div>
      <div class="card-body">
        <div class="row g-3">
         
          <div class="col-md-4">
            <label for="title" class="form-label"><strong>Plot Title</strong></label>
            <input type="text" class="form-control" id="title" name="title" placeholder="Optional plot title">
            <small class="text-muted">Title shown on plot.</small>
          </div>
          <div class="col-md-4">
            <label for="dpi" class="form-label"><strong>Resolution (DPI)</strong></label>
            <input type="number" class="form-control" id="dpi" name="dpi" value="300" min="150" max="600" step="50">
            <small class="text-muted">Recommended â‰¥300 dpi for publications.</small>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-4 text-start">
      <button type="submit" class="btn btn-primary" style="background:#B99C6B;border:none;">
        <i class="fas fa-chart-area me-2"></i>Generate Brisbane Plot
      </button>
    </div>
  </form>

  <!-- Processing Status -->
  <div id="processing-status-brisbane" class="mt-3" style="display:none;"></div>

  <!-- Plot display -->
  <div id="plot-display-brisbane" class="mt-4"></div>

  <!-- Download section -->
  <div id="download-section-brisbane" class="mt-3" style="display:none;">
    <button id="download-plot-brisbane-png" class="btn btn-primary" disabled>Download PNG</button>
    <button id="download-plot-brisbane-pdf" class="btn btn-outline-primary" style="display:none;">Download PDF</button>
  </div>
</div>
